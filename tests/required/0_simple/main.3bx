macro effect return value:
	replacement:
		@intrinsic("return", value)

effect set var to val:
    execute:
        @intrinsic("store", var, val)

effect print msg:
    execute:
        @intrinsic("call", "libc", "printf", "%ld", msg)

macro expression left + right:
    replacement:
        @intrinsic("add", left, right)

# Simple test
set x to 42
set y to 10
#this matches 'set $ to $' and the second '$' matches '$ + $'
set z to x  + y
print z